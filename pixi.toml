[workspace]
authors = ["VioletsOleander <1377232072@qq.com>"]
channels = ["conda-forge"]
name = "mnist"
platforms = ["linux-64", "win-64"]
version = "0.1.0"

[tasks]

[tasks.configure]
cmd = "cmake -G Ninja -S . -B build"
env = { CMAKE_EXPORT_COMPILE_COMMANDS = "1" }
description = "Configure the project using CMake"

[tasks.build]
cmd = "cmake --build build"
description = "Build the project with generated configuration files"

[tasks.run]
cmd = "./build/mnist"
description = "Run the MNIST executable"

[dependencies]
libtorch = { version = ">=2.8.0,<3", build = "*cpu*" }
gcc = ">=15.2.0,<15.3"
cmake = ">=4.1.2,<5"
ninja = ">=1.13.1,<2"

[feature.dataset.dependencies]
python = "*"

[feature.dataset.pypi-dependencies]
huggingface-hub = { version = ">=0.35.3, <0.36", extras = ["cli"] }

[feature.dataset.tasks]

[feature.dataset.tasks.hf-login]
cmd = "hf auth login --token $HF_TOKEN"
description = "Log in to Hugging Face using the provided token"

[feature.dataset.tasks.get-dataset]
cmd = "hf download --repo-type dataset --local-dir dataset ylecun/mnist"
description = "Download the MNIST dataset from Hugging Face"

[environments]
dataset = { features = ["dataset"], no-default-feature = true }
